{
  "vault": {
    "server": {
      "address": "<%= @vault['server']['address'] %>",
      "ca-cert": "<%= @vault['server']['ca-cert'] %>",
      "ca-path": null,
      "tls-skip-verify": false,
      "api-version": "v1"
    },
    "pki": {
      "path": "<%= @vault['pki']['path'] %>",
      "role": "<%= @vault['pki']['role'] %>"
    },
    "token": "<%= @vault['token'] %>",
    "token-renewable": true
  },
  "certCN": "swarm.service.consul",
  "certAltNames": [],
  "certIPs": [<%= @cert['certIPs'].map { |ip| "\"#{ip}\""}.join(',') %>],
  "certTTL": "<%= @cert['certTTL'] %>",
  "certFile": "/etc/docker/certs/cert.pem",
  "keyFile": "/etc/docker/certs/key.pem",
  "caFile": "/etc/docker/certs/ca.pem",
  "onUpdate": "systemctl restart docker.service",
  "renewalCoefficient": 0.9,
  "once": false
}
